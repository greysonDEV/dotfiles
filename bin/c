#!/bin/zsh

for arg in $@
do
    case $arg in
        -v|--verbose) VERBOSE=true
        shift
        ;;
        *.c) TARGET=$arg
        shift
        ;;
    esac
done

if [ ! $TARGET  ]
then
    printf "fatal: no .c file provided\n"
    exit 1
elif [ ! -f $TARGET ]
then
    printf "fatal: $TARGET does not exist\n"
    exit 1
fi

if [ $VERBOSE ]
then
    make
else
    make >> /dev/null
fi

./$(basename $TARGET .c)
